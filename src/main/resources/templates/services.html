<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- 
    More Templates Visit ==> ProBootstrap.com
    Free Template by ProBootstrap.com under the License Creative Commons 3.0 ==> (probootstrap.com/license)

    IMPORTANT: You can do whatever you want with this template but you need to keep the footer link back to ProBootstrap.com
    -->
    <title>명당 - BigData Chart</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Free HTML5 Website Template by ProBootstrap.com" />
    <meta name="keywords" content="free bootstrap 4, free bootstrap 4 template, free website templates, free html5, free template, free website template, html5, css3, mobile first, responsive" />
    <meta name="author" content="ProBootstrap.com" />
    
    <!-- <link href="https://fonts.googleapis.com/css?family=Work+Sans" rel="stylesheet"> -->

    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/open-iconic-bootstrap.min.css">
    
    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/css/owl.theme.default.min.css">

    <link rel="stylesheet" href="/css/icomoon.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/style.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  </head>
  <body>

    <div th:replace="/header.html"></div>

    <main role="main" class="probootstrap-main js-probootstrap-main">
      <div class="probootstrap-bar">
        <a href="#" class="probootstrap-toggle js-probootstrap-toggle"><span class="oi oi-menu"></span></a>
        <div class="probootstrap-main-site-logo"><a href="../../../../../../Downloads/aside-master/aside-master/index.html">Aside</a></a></div>
      </div>

	<!-- 차트 애니메이션, jquery값 -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>


        <!-- END row -->
        <section class="probootstrap-section">
          <div class="container-fluid">
            <div class="row mb-5">
              
              <div class="container-fd">
               <div class="media d-block mb-4 text-left probootstrap-media p-md-5 p-4">
                  <div class="pie-name"><h4>업종별 점포수 한눈에 보기</h4></div>
                  <div class="pie-info">가게별 업종수를 한 눈에 확인해보세요.</div>
                  <div class="container-chart">
                    <canvas class="canvas-chart" id="PieChart" width="450px" height="450px">업종별 점포수</canvas>
                  
                  <script>
                                    
               // Bar chart
               var ctx = document.getElementById('PieChart').getContext('2d');
			    var PieChart = new Chart(ctx, {
			      type: 'pie',
			      data:{
			        labels:[
			  			    '상가/점포/소매', '교육/사무/회계', '카페/여가', '중개/관리', 
			                '생활/건강', '음식/유흥', '숙박/의류', '애견/미용', '기타'
			                ],
			                datasets:[
			                {
			                label:'업종의 점포 수',
			                data:[1342, 426, 868, 311, 615, 1523, 742, 426, 210], // 추후 DB에서 가져옴
			                backgroundColor: [
			                'rgb(255, 102, 102)', 'rgb(255, 178, 102)', 'rgb(255, 255, 102)', 'rgb(102, 255, 102)',
			                'rgb(102, 255, 255)', 'rgb(102, 102, 255)', 'rgb(178, 102, 255)', 'rgb(255, 102, 255)', 'rgb(192, 192, 192)'
			                ],
			                hoverOffset: 4  
			            }],
			        }});
			        /* 차트 옵션(크기, 후버, 그림자, 스케일 조정, 등) */
			        window.onload = function(){
			        	var ctx8 = $('PieChart').get(0).getContext("2d");
			        	window.theChart8 = new Chart(ctx8, {
			                type: 'pie',
			                data: data,
			                options: {
			                        responsive: true,
			                        legend: false,
			                        maintainAspectRatio : false,
			                        animation: false,
			                        pieceLabel: {
			                          mode:"label",
			                          position:"inside",
			                          fontSize: 11,
			                          fontStyle: 'bold'
			                       }
			                }
			            })
			        };
	  
				</script>
                  </div>                  
                  <br>
                </div>
              </div>
			
              <div class="container-fd">
                <div class="media d-block mb-4 text-left probootstrap-media p-md-5 p-4">
                  <div class="bar-name"><h4>일일 평균 유동인구 정보</h4></div>
                  <div class="bar-info">유동인구를 파악하여 평균치를 계산하여 제공해줍니다.</div>
                  	<select name="sido1" id="sido1" class="border border-success p-2 mb-2 border-opacity-50"></select>
					<select name="gugun1" id="gugun1" class="border border-success p-2 mb-2 border-opacity-50"></select>
                  <div class="container-chart">
                    <canvas class="canvas-chart" id="BarChart" width="450px" height="450px">평균 유동인구 정보</canvas>
                 	
                 	<script>
                 	
                 	$('document').ready(function() {
       				 var area0 = ["행정구 선택","광산구", "남구", "동구", "북구", "서구"];
       				  var area1 = ["도산동", "도천동", "비아동", "산월동", "산정동", "선암동", "소촌동", "송정동", 
       				        "수완동", "신가동", "신창동", "신촌동", "쌍암동", "우산동", "운남동", "운수동", "월계동", "월곡동",
       				        "장덕동", "하남동", "흑석동"];
       				   var area2 = ["노대동", "방림동", "백운동", "봉선동", "사동", "서동", "송하동", "압촌동", "양림동",
       				        "월산동", "임암동", "주월동", "지석동", "진월동", "행암동"];
       				   var area3 = ["계림동", "금남로2가", "금남로5가", "동명동", "산수동", "선교동", "소태동", "수기동", "용산동",
       				        "운림동", "월남동", "장동", "지산동", "충장로4가", "학동"];
       				   var area4 = ["각화동", "동림동", "두암동", "매곡동", "문흥동", "본촌동", "삼각동", "신안동", "신용동",
       				        "양산동", "연제동", "오치동", "용두동", "용봉동", "우산동", "운암동", "유동", "일곡동",
       				        "임동", "중흥동", "풍향동"];
       				   var area5 = ["광천동", "금호동", "내방동", "농성동", "동천동", "마륵동", "매월동", "쌍촌동", "양동",
       				        "유촌동", "치평동", "풍암동", "화정동"];
       				 		 

       				 // 행정구 선택 박스 초기화

       				 $("select[name^=sido]").each(function() {
       				  $selsido = $(this);
       				  $.each(eval(area0), function() {
       				   $selsido.append("<option value='"+this+"'>"+this+"</option>");
       				  });
       				  $selsido.next().append("<option value=''>구/군 선택</option>");
       				 });

       				 // 행정구 선택시 행정동 설정

       				 $("select[name^=sido]").change(function() {
       				  var area = "area"+$("option",$(this)).index($("option:selected",$(this))); // 선택지역의 행정동 Array
       				  var $gugun = $(this).next(); // 선택영역 행정동 객체
       				  $("option",$gugun).remove(); // 행정동 초기화

       				  if(area == "area0")
       				   $gugun.append("<option value=''>행정동 선택</option>");
       				  else {
       				   $.each(eval(area), function() {
       				    $gugun.append("<option value='"+this+"'>"+this+"</option>");
       				   });
       				  }
       				 });
       				});              
				       
                 	$(document).ready(function() {

				        	$('gugun1').change(function() {
				        		var pick = $(this).val();
				        		alert(pick + "을 선택");
				        	  
				        	  $.ajax({
				        	    url: "http://123.456.789.0/url",
				        	    type: "get",
				        	    dataType: "json",
				        	    data: {"pick" : pick},
				        	    success: function(data){
				        	    	// 데이터를 받아오는데 성공
				        	      $('BarChart').append(data);
				        	    },
				        	    error: function (request, status, error){
				        	    	// 데이터를 받아오는데 실패
				        	    }
				        	    });
				        	  
				        	})

				        	})
			     
				        
				    </script>
                  </div>
                </div>
              </div>

            </div>
            
            <!-- let http = require('http');

				let express = require('express');
				
				let bodyParser = require('services');
				
				app = express();
				
				let inputData = { data1 : 'node to tomcat testdata1', data2 : 'node to tomcat testdata2'};
				// 전달하고자 하는 데이터 생성
				
				let opts = {
				    host: '127.0.0.1',
				    port: 8080,
				    method: 'POST',
				    path: '/start',
				    headers: {'Content-type': 'application/json'},
				    body: inputData
				};
				
				
				// 전달 방식은 json 형태.
				let resData = '';
				let req = http.request(opts, function(res) {
				
				    res.on('end', function() {
				        console.log(resData);
				    });
				});
				
				opts.headers['Content-Type'] = 'application/x-www-form-urlencoded';
				req.data = opts ;
				opts.headers['Content-Length'] = req.data.length;
				
				req.on('error', function(err) {
				    console.log("에러 발생 : " + err.message);
				});
				
				
				app.use(bodyParser.urlencoded({ extended: false}));
				
				app.use(bodyParser.json());
				
				app.use(function (req,res,next) {
				    //console.log("정우형 재형이형 사랑해");
				
				    res.writeHead('200',{'Content-Type':'text/html;charset=utf8'});
				    res.end('<h1>응원해줘서 고마워요</h1>');
				    console.log(req.body);
				
				});
				
				// 요청 전송
				req.write(JSON.stringify(req.data.body));
				
				req.end();
				
				http.createServer(app).listen(1516, function(){
				    console.log('Server is running...');
				}); -->

            
          </div>
        </section>
        <!-- END section -->

      </div>

      <div th:replace="/footer.html"></div>

    </main>


    <script>
    
    
    
    var lineChartOne = document.getElementById('lineChartOne').getContext('2d');

      
      
      

   /*    const DATA_COUNT = 7;
      const NUMBER_CFG = {count: DATA_COUNT, min: -100, max: 100}; */

      const labels = ['학운/지원', '지산/산수', '계림/동명/충장', '서남/학동', '동천/광천', '유덕/치평', '상무/화정', '농성/양동', '금호/풍암/서창', '월산/사직', '백운/봉선', '양림/방림', '주월/효덕', '송암/대촌', '건국/석곡', '일곡/양산', '동림/운암', '매곡/삼각', '오치/용봉', '임동/신안/중앙', '문흥/문화', '중흥/우산', '두암/풍향', '임곡/하남', '본량/삼도', '어룡/평동', '도산/동곡', '송정/신흥', '월곡/우산', '신창/신가', '운남/수완', '첨단/비아'];
      const data = {
        labels: labels,
        datasets: [{
          label: '일일 평균 유동인구 정보',
          data: [1235, 4235, 1354, 3546, 3215, 2345, 3215, 1351, 5434, 3215, 1346, 1347, 4264, 3543, 2426, 1356, 6423, 5422, 3245, 1234, 3546, 2345, 6542, 3241, 3246, 2346, 2487, 2426, 3546, 2431, 5423, 5462],
          backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(255, 205, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(153, 102, 255, 0.2)'
          ],
          borderColor: [
            'rgb(255, 99, 132)',
            'rgb(255, 205, 86)',
            'rgb(75, 192, 192)',
            'rgb(54, 162, 235)',
            'rgb(153, 102, 255)'
          ],
          borderWidth: 1
        }]
      };

      const lineOne = new Chart(drawlineOne, {
        type: 'line',
        data: lineChartOneData,
        option: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: (lineChartOneData) => 'PIR'
            },
            tooltip: {
              mode: 'index'
            },
          },
          interaction: {
            mode: 'nearest',
            axis: 'x',
            intersect: false
          },
          scales: {
            x: {
              title: {
                display: true,
                text: 'Month'
              }
            },
            y: {
              title: {
                display: true,
                text: 'Value'
              }
            }
          }
        }
      }
     )

    </script>


    <script src="/js/jquery-3.2.1.slim.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/jquery.waypoints.min.js"></script>
    <script src="/js/imagesloaded.pkgd.min.js"></script>
    <script src="/js/main.js"></script>

    
  </body>
</html>